/*------------------------------------*\
  #COMPOSANT: MEMBRE ROW
  Styles pour une ligne (tr) du tableau des membres.
  Desktop: Ligne standard.
  Mobile: Liste épurée, label/valeur côte à côte, colonnes ID/Rôle masquées.
\*------------------------------------*/

// --- Utilisation des variables globales de styles.txt ---
// Ex: var(--border-color), var(--bg-light-gray), var(--spacing-sm), etc.
// Aucune variable locale n'est définie ici.

/*------------------------------------*\
  #STYLES DESKTOP (> 768px)
\*------------------------------------*/
:host { // Cible l'élément hôte <tr>
  display: table-row; // Comportement normal de ligne de tableau.
  transition: background-color 0.2s ease;

  &:hover {
    background-color: var(--bg-light-gray); // Variable globale
  }
  // La bordure basse finale est gérée par le parent : tbody tr:last-child td { border-bottom: none; }
}

td { // Cible les <td> DANS ce composant
  padding: var(--spacing-md) var(--spacing-md); // Variable globale (ex: 16px)
  text-align: left;
  vertical-align: middle;
  border-bottom: 1px solid var(--border-color); // Variable globale
  // Gestion standard du dépassement de texte sur desktop.
  max-width: 200px; // Valeur fixe, ajuster si besoin
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  // Style spécifique pour la cellule Actions sur desktop.
  &:last-child {
    text-align: center;
    max-width: none; // Pas de limite de largeur.
    width: auto; // Largeur s'adapte aux boutons.
    overflow: visible; // Pour les ombres/effets sur boutons.
    white-space: nowrap; // Empêche les boutons de passer à la ligne.
  }
}

// Styles des boutons et conteneur d'actions (Communs Desktop/Mobile)
.btn-actions {
  display: inline-flex; // Aligne boutons horizontalement.
  justify-content: center; // Centre horizontalement.
  align-items: center; // Centre verticalement.
  gap: var(--spacing-sm); // Variable globale (ex: 8px)
}

.btn { // Styles des boutons spécifiques à cette ligne (hérite potentiellement de .btn global).
  display: inline-flex; align-items: center; justify-content: center;
  padding: 6px; // Valeur fixe pour petite taille icône seule.
  margin: 0;
  border-radius: var(--border-radius); border: none; background: none; cursor: pointer; // Variable globale.
  line-height: 1; // Important pour alignement icône.
  transition: color 0.2s ease, background-color 0.2s ease;

  .icon, lucide-icon { // Ciblage des icônes.
    width: 16px; height: 16px; // Valeur fixe pour taille icône actions.
    stroke: currentColor; stroke-width: 2px; // Valeur fixe épaisseur.
  }

  // Couleurs spécifiques actions (utilisent variables globales).
  &.btn-edit { color: var(--main-orange); &:hover { color: color-mix(in srgb, var(--main-orange) 80%, black); } } // Assombri l'orange.
  &.btn-delete { color: var(--danger); &:hover { color: color-mix(in srgb, var(--danger) 80%, black); } } // Assombri le rouge.

  // Style de focus pour l'accessibilité (utilise variable globale).
  &:focus-visible {
    outline: 2px solid var(--main-blue); outline-offset: 1px;
  }
}

/*------------------------------------*\
  #STYLES MOBILE (<= 768px) - LISTE ÉPURÉE, LABEL/VALEUR CÔTE À CÔTE + COLONNES MASQUÉES
\*------------------------------------*/
@media screen and (max-width: 768px) {

  :host { // Transforme le <tr> en bloc simple avec séparateur.
    display: block; // Empile les enregistrements.
    margin: 0; // Pas de marge externe.
    padding: var(--spacing-sm) var(--spacing-xs); // Padding interne léger (V/H).
    background-color: transparent; // Hérite fond parent.
    border-bottom: 1px solid var(--border-color); // Séparateur léger sous chaque enregistrement.

    &:hover { background-color: transparent; } // Annule survol.
    &:last-child { border-bottom: none; } // Pas de séparateur sous le dernier.
  }

  td { // Transforme les <td> en lignes flex label/valeur.
    display: flex; // !! Utilise Flexbox pour aligner label et valeur !!
    justify-content: space-between; // Pousse le label à gauche et la valeur à droite.
    align-items: center; // Centre verticalement label et valeur.
    padding: var(--spacing-xs) 0; // Espacement vertical entre les champs, padding H reset.
    border-bottom: none; // Supprime la bordure interne de cellule.
    white-space: normal; // Permet retour ligne valeur.
    overflow: visible; text-overflow: clip; max-width: none; // Reset styles desktop.
    position: static; // Positionnement normal (pas besoin de relative/absolute ici).
    min-height: 1.8em; // Hauteur minimale indicative.

    // --- Affichage du Label à GAUCHE via Pseudo-élément ---
    &::before {
      content: attr(data-label); // Récupère label depuis HTML.
      font-weight: 600; // Label semi-gras.
      font-size: 0.8rem; // Label un peu plus petit.
      color: var(--text-medium); // Couleur label via variable globale.
      margin-right: var(--spacing-sm); // Espace entre label et valeur.
      // Styles pour que le label ne prenne pas trop de place mais reste lisible
      flex-shrink: 0; // Empêche le label de rétrécir si la valeur est longue.
      white-space: nowrap; // Label sur une ligne.
      // Optionnel: limiter la largeur du label si nécessaire
      // max-width: 40%;
      // overflow: hidden;
      // text-overflow: ellipsis;
    }

    // --- Valeur (Contenu du TD) ---
    // La valeur prend l'espace restant grâce à flexbox.
    text-align: right; // Aligne la valeur à droite.
    font-size: 0.9rem; // Taille valeur mobile.
    // Gérer le cas où la valeur est très longue et pourrait sortir
    word-break: break-word; // Permet à la valeur de passer à la ligne si besoin.

    // --- Dernière cellule (Actions) mobile ---
    &:last-child {
      display: block; // !! Revient en block pour centrer le contenu !!
      padding: var(--spacing-md) 0 0 0; // Padding top, reset autres paddings.
      text-align: center; // Centre le conteneur .btn-actions.
      min-height: auto; // Pas de hauteur minimale spécifique.
      // Masquer le label "Actions".
      &::before { display: none; }
    }

    // Cache les cellules vides (sauf actions).
    &:not(:last-child):empty {
      display: none; // Masque label+valeur si vide.
    }
  }

  /* --- MASQUAGE SPÉCIFIQUE DES COLONNES SUR MOBILE --- */
  td[data-label="ID"],
  td[data-label="Rôle"] {
    display: none; // Cache complètement ces cellules sur mobile.
  }
  /* --- Fin Masquage Spécifique --- */


  // Conteneur boutons mobile (pas de changement ici).
  .btn-actions {
    justify-content: center;
    padding-top: 0;
  }

} // Fin Media Query Mobile
