/*------------------------------------*\
  #COMPOSANT: RESERVATION ROW
  Styles pour une ligne (tr) du tableau des réservations.
  Desktop: Ligne standard AVEC RETOUR À LA LIGNE pour éviter scroll H.
  Mobile: Liste épurée, label/valeur côte à côte, colonnes optionnelles masquées.
\*------------------------------------*/

// --- Utilisation des variables globales de styles.txt ---
// Ex: var(--border-color), var(--bg-light-gray), var(--spacing-sm), etc.
// Aucune variable locale n'est définie ici.

/*------------------------------------*\
  #STYLES DESKTOP (> 768px) - CORRIGÉ POUR WRAPPING
\*------------------------------------*/
:host { // Cible l'élément hôte <tr>
  display: table-row; // Comportement normal de ligne de tableau.
  transition: background-color 0.2s ease;

  &:hover {
    background-color: var(--bg-light-gray); // Variable globale
  }
  // La bordure basse finale est gérée par le parent : tbody tr:last-child td { border-bottom: none; }
}

td { // Cible les <td> DANS ce composant
  padding: var(--spacing-md) var(--spacing-md); // Variable globale (ex: 16px)
  text-align: left; // Alignement standard.
  vertical-align: middle; // Alignement vertical.
  border-bottom: 1px solid var(--border-color); // Variable globale

  // --- Gestion du texte Desktop ---
  // Permet le retour à la ligne par défaut pour s'adapter à la largeur.
  white-space: normal;
  // Optionnel: Limiter la largeur maximale avant retour à la ligne si besoin.
  // max-width: 300px; // Décommentez et ajustez si une colonne devient trop large.
  // Gérer les mots très longs qui ne peuvent pas couper (URLs, etc.)
  word-break: break-word; // Permet de couper les mots longs pour éviter l'overflow.

  // --- Styles spécifiques pour certaines colonnes Desktop ---

  // Colonnes où nowrap est préférable (Date, Heure)
  &[data-label="Date"],
  &[data-label="Heure"] {
    white-space: nowrap;
    width: 1%; // Astuce pour que la colonne prenne la largeur minimale nécessaire.
    text-align: center; // Centrer Date et Heure.
  }

  // Cellule Actions desktop (centrée, pas de retour à la ligne).
  &:last-child { // Correspond à la cellule Actions
    text-align: center;
    max-width: none; // Pas de limite de largeur.
    width: auto; // Largeur s'adapte aux boutons.
    overflow: visible; // Pour les ombres/effets sur boutons.
    white-space: nowrap; // !! Important: Empêche les boutons de passer à la ligne !!
  }
}

// Styles des boutons et conteneur d'actions (Communs Desktop/Mobile)
.btn-actions {
  display: inline-flex; // Aligne boutons horizontalement.
  justify-content: center; // Centre horizontalement.
  align-items: center; // Centre verticalement.
  gap: var(--spacing-sm); // Variable globale (ex: 8px)
}

.btn { // Styles des boutons spécifiques à cette ligne (hérite potentiellement de .btn global).
  display: inline-flex; align-items: center; justify-content: center;
  padding: 6px; // Valeur fixe pour petite taille icône seule.
  margin: 0;
  border-radius: var(--border-radius); border: none; background: none; cursor: pointer; // Variable globale.
  line-height: 1; // Important pour alignement icône.
  transition: color 0.2s ease, background-color 0.2s ease;

  .icon, lucide-icon { // Ciblage des icônes.
    width: 16px; height: 16px; // Valeur fixe pour taille icône actions.
    stroke: currentColor; stroke-width: 2px; // Valeur fixe épaisseur.
  }

  // Couleurs spécifiques actions (utilisent variables globales).
  // Adaptez les classes (.btn-primary, .btn-secondary, .btn-danger) aux couleurs souhaitées
  &.btn-primary { // Bouton QR Code (orange)
    color: var(--main-orange);
    &:hover { color: color-mix(in srgb, var(--main-orange) 80%, black); } // Assombri l'orange.
  }
  &.btn-secondary { // Bouton PDF (bleu)
    color: var(--main-blue);
    &:hover { color: var(--secondary-blue); } // Ou une version assombrie de --main-blue
  }
  &.btn-danger { // Bouton Supprimer (rouge)
    color: var(--danger);
    &:hover { color: color-mix(in srgb, var(--danger) 80%, black); } // Assombri le rouge.
  }


  // Style de focus pour l'accessibilité (utilise variable globale).
  &:focus-visible {
    outline: 2px solid var(--main-blue); outline-offset: 1px;
  }
}

/*------------------------------------*\
  #STYLES MOBILE (<= 768px) - LISTE ÉPURÉE, LABEL/VALEUR CÔTE À CÔTE + COLONNES MASQUÉES
\*------------------------------------*/
@media screen and (max-width: 768px) {

  :host { // Transforme le <tr> en bloc simple avec séparateur.
    display: block; // Empile les enregistrements.
    margin: 0; // Pas de marge externe.
    padding: var(--spacing-sm) var(--spacing-xs); // Padding interne léger (V/H).
    background-color: transparent; // Hérite fond parent.
    border-bottom: 1px solid var(--border-color); // Séparateur léger sous chaque enregistrement.

    &:hover { background-color: transparent; } // Annule survol.
    &:last-child { border-bottom: none; } // Pas de séparateur sous le dernier.
  }

  td { // Transforme les <td> en lignes flex label/valeur.
    display: flex; // !! Utilise Flexbox !!
    justify-content: space-between; // Label à gauche, valeur à droite.
    align-items: center; // Centre verticalement.
    padding: var(--spacing-xs) 0; // Espacement vertical entre champs, padding H reset.
    border-bottom: none; // Supprime la bordure interne de cellule.
    white-space: normal; // Permet retour ligne valeur.
    overflow: visible; text-overflow: clip; max-width: none; // Reset styles desktop.
    position: static; // Positionnement normal.
    min-height: 1.8em; // Hauteur minimale indicative.

    // --- Affichage du Label à GAUCHE ---
    &::before {
      content: attr(data-label); // Récupère label depuis HTML.
      font-weight: 600; // Label semi-gras.
      font-size: 0.8rem; // Label un peu plus petit.
      color: var(--text-medium); // Couleur label.
      margin-right: var(--spacing-sm); // Espace entre label et valeur.
      flex-shrink: 0; // Empêche le label de rétrécir.
      white-space: nowrap; // Label sur une ligne.
      text-align: left; // Assure alignement gauche.
      // Optionnel: limiter largeur label.
      // max-width: 40%; overflow: hidden; text-overflow: ellipsis;
    }

    // --- Valeur (Contenu du TD) ---
    text-align: right; // Aligne la valeur à droite.
    font-size: 0.9rem; // Taille valeur mobile.
    word-break: break-word; // Permet retour à la ligne si valeur longue.

    // --- Cellule Actions mobile ---
    &:last-child { // Correspond à la cellule Actions
      display: block; // !! Revient en block !!
      padding: var(--spacing-md) 0 0 0; // Padding top, reset autres.
      text-align: center; // Centre le contenu (.btn-actions).
      min-height: auto;
      &::before { display: none; } // Masque label "Actions".
    }

    // Pas de style spécifique pour Catégorie comme dans event-row ici.

    // Cache les cellules vides (sauf actions).
    &:not(:last-child):empty {
      display: none;
    }
  }

  /* --- MASQUAGE SPÉCIFIQUE DES COLONNES SUR MOBILE (Optionnel) --- */
  // Décommentez/ajoutez pour masquer des colonnes sur mobile
  // td[data-label="Heure"] // Exemple: Masquer l'heure sur mobile
  // {
  //   display: none;
  // }
  /* --- Fin Masquage Spécifique --- */


  // Conteneur boutons mobile (pas de changement ici).
  .btn-actions {
    justify-content: center;
    padding-top: 0;
  }

} // Fin Media Query Mobile

