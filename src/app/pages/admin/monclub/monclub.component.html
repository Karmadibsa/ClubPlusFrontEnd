<!-- Applique la classe standardisée pour la zone de contenu principale -->
<div class="main-content-area">

  <div class="header page-header"> <!-- Classe plus spécifique pour le header de cette page -->
    <h1>Modifier les Informations du Club</h1>
    <button type="button" class="btn btn-secondary btn-copy-code" (click)="copyCodeClub()" aria-live="polite"> <!-- Type button, classe spécifique, aria-live pour feedback -->
      <lucide-icon class="icon" name="copy" aria-hidden="true"></lucide-icon>
      <span class="copy-button-text">Copier le Code Club</span>
      <span class="copy-feedback" aria-hidden="true"></span> <!-- Pour feedback visuel "Copié!" -->
    </button>
  </div>

  <!-- Utilisation de main avec role -->
  <main class="club-main" role="main">
    <!-- Utilisation de form avec novalidate car on gère les erreurs via Angular -->
    <form [formGroup]="clubForm" (ngSubmit)="onSubmit()" class="info-form" novalidate>

      <!-- Fieldset pour regrouper les informations générales -->
      <fieldset class="form-section">
        <legend class="section-title">Informations Générales</legend>

        <div class="form-group">
          <label for="nom">Nom du Club <span class="required-indicator" aria-hidden="true">*</span></label>
          <input
            type="text"
            id="nom"
            formControlName="nom"
            placeholder="Nom du club"
            class="form-control"
            [class.is-invalid]="clubForm.get('nom')?.invalid && (clubForm.get('nom')?.touched || clubForm.get('nom')?.dirty)"
            aria-required="true"
            aria-describedby="nom-error"
          />
          <!-- Conteneur pour message d'erreur -->
          <div id="nom-error" class="invalid-feedback" role="alert" aria-live="assertive">
            @if (clubForm.get('nom')?.hasError('required')) {
              Le nom du club est requis.
            }
            <!-- Autres erreurs possibles pour 'nom' -->
          </div>
        </div>
      </fieldset>

      <!-- Fieldset pour regrouper l'adresse -->
      <fieldset class="form-section">
        <legend class="section-title">Adresse</legend>

        <div class="form-group">
          <label for="numero_voie">Numéro de Voie</label>
          <input
            type="text"
            id="numero_voie"
            formControlName="numero_voie"
            placeholder="Numéro de voie"
            class="form-control"
            [class.is-invalid]="clubForm.get('numero_voie')?.invalid && (clubForm.get('numero_voie')?.touched || clubForm.get('numero_voie')?.dirty)"
            aria-describedby="numero_voie-error"
          />
          <div id="numero_voie-error" class="invalid-feedback" role="alert" aria-live="assertive">
            <!-- Messages d'erreur pour numero_voie -->
          </div>
        </div>

        <div class="form-group">
          <label for="rue">Rue <span class="required-indicator" aria-hidden="true">*</span></label>
          <input
            type="text"
            id="rue"
            formControlName="rue"
            placeholder="Rue"
            class="form-control"
            [class.is-invalid]="clubForm.get('rue')?.invalid && (clubForm.get('rue')?.touched || clubForm.get('rue')?.dirty)"
            aria-required="true"
            aria-describedby="rue-error"
          />
          <div id="rue-error" class="invalid-feedback" role="alert" aria-live="assertive">
            @if (clubForm.get('rue')?.hasError('required')) {
              La rue est requise.
            }
          </div>
        </div>

        <div class="form-group">
          <label for="codepostal">Code Postal <span class="required-indicator" aria-hidden="true">*</span></label>
          <input
            type="text"
            id="codepostal"
            formControlName="codepostal"
            placeholder="Code postal"
            class="form-control"
            [class.is-invalid]="clubForm.get('codepostal')?.invalid && (clubForm.get('codepostal')?.touched || clubForm.get('codepostal')?.dirty)"
            aria-required="true"
            aria-describedby="codepostal-error postal-format-hint"
          />
          <!-- Optionnel: Aide sur le format -->
          <small id="postal-format-hint" class="form-text text-muted">Format: 5 chiffres (ex: 75001)</small>
          <div id="codepostal-error" class="invalid-feedback" role="alert" aria-live="assertive">
            @if (clubForm.get('codepostal')?.hasError('required')) {
              Le code postal est requis.
            }
            @if (clubForm.get('codepostal')?.hasError('pattern')) {
              Le format du code postal est invalide (5 chiffres attendus).
            }
          </div>
        </div>

        <div class="form-group">
          <label for="ville">Ville <span class="required-indicator" aria-hidden="true">*</span></label>
          <input
            type="text"
            id="ville"
            formControlName="ville"
            placeholder="Ville"
            class="form-control"
            [class.is-invalid]="clubForm.get('ville')?.invalid && (clubForm.get('ville')?.touched || clubForm.get('ville')?.dirty)"
            aria-required="true"
            aria-describedby="ville-error"
          />
          <div id="ville-error" class="invalid-feedback" role="alert" aria-live="assertive">
            @if (clubForm.get('ville')?.hasError('required')) {
              La ville est requise.
            }
          </div>
        </div>
      </fieldset>

      <!-- Fieldset pour regrouper le contact -->
      <fieldset class="form-section">
        <legend class="section-title">Contact</legend>

        <div class="form-group">
          <label for="telephone">Téléphone</label>
          <input
            type="tel"
          id="telephone"
          formControlName="telephone"
          placeholder="Téléphone"
          class="form-control"
          [class.is-invalid]="clubForm.get('telephone')?.invalid && (clubForm.get('telephone')?.touched || clubForm.get('telephone')?.dirty)"
          aria-describedby="telephone-error"
          />
          <div id="telephone-error" class="invalid-feedback" role="alert" aria-live="assertive">
            @if (clubForm.get('telephone')?.hasError('pattern')) {
              Le format du numéro de téléphone est invalide.
            }
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email <span class="required-indicator" aria-hidden="true">*</span></label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Email du club"
            class="form-control"
            [class.is-invalid]="clubForm.get('email')?.invalid && (clubForm.get('email')?.touched || clubForm.get('email')?.dirty)"
            aria-required="true"
            aria-describedby="email-error"
          />
          <div id="email-error" class="invalid-feedback" role="alert" aria-live="assertive">
            @if (clubForm.get('email')?.hasError('required')) {
              L'email est requis.
            }
            @if (clubForm.get('email')?.hasError('email')) {
              Le format de l'email est invalide.
            }
          </div>
        </div>
      </fieldset>

      <!-- Boutons d'action -->
      <div class="actions-container form-section"> <!-- Ajout form-section pour cohérence marge -->
        <button type="submit" class="btn btn-primary" [disabled]="clubForm.invalid || clubForm.pending">
          <lucide-icon name="save" class="icon" aria-hidden="true"></lucide-icon>
          Enregistrer les modifications
        </button>
        <button type="button" (click)="onReset()" class="btn btn-secondary">
          <lucide-icon name="rotate-ccw" class="icon" aria-hidden="true"></lucide-icon>
          Réinitialiser
        </button>
      </div>
    </form>
  </main>

</div> <!-- Fin .main-content-area -->

