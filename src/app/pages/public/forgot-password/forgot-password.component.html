<!-- En-tête de la page -->
<div class="contenu">
  <div class="page-header">
    <i data-lucide="key-round" aria-hidden="true"></i>
    <h1 class="page-title">Mot de passe oublié ?</h1>
  </div>

  <!-- Section principale contenant le formulaire -->
  <section class="main-section">
    <h2 id="main-title" class="visually-hidden">Formulaire de demande de réinitialisation de mot de passe</h2>

    <!-- Formulaire Réactif Angular -->
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" novalidate>
      <fieldset class="card-section">
        <legend class="section-header">
          <h2>Réinitialiser le mot de passe</h2>
          <p class="section-description">Entrez votre adresse e-mail et nous vous enverrons un lien pour réinitialiser votre mot de passe.</p>
        </legend>

        <div class="card-content">

          <!-- Champ Adresse E-mail -->
          <div class="form-group">
            <label for="email">
              Adresse e-mail<span class="required-indicator">*</span>
            </label>
            <input type="email"
                   id="email"
                   formControlName="email"
                   class="form-control"
                   [class.is-invalid]="email?.invalid && (email?.dirty || email?.touched)"
                   required
                   placeholder="exemple@domaine.com"
                   aria-describedby="email-error">

            <!-- Messages d'erreur pour E-mail avec @if -->
            @if (email?.invalid && (email?.dirty || email?.touched)) {
              <div id="email-error" class="invalid-feedback">
                @if (email?.hasError('required')) {
                  <span>L'adresse e-mail est requise.</span>
                }
                @if (email?.hasError('email')) {
                  <span>Veuillez entrer une adresse e-mail valide.</span>
                }
              </div>
            }
          </div>

        </div> <!-- Fin .card-content -->

        <!-- Actions du formulaire -->
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" [disabled]="isLoading || forgotPasswordForm.invalid">
            @if (isLoading) {
              <span class="animate-spin" aria-hidden="true">
                <i data-lucide="loader-circle"></i>
              </span>
              <span>Envoi...</span>
            } @else {
              <i data-lucide="send" aria-hidden="true"></i>
              <span>Envoyer le lien de réinitialisation</span>
            }
          </button>
        </div>

      </fieldset>
    </form>

    <!-- Optionnel: Lien pour retourner à la page de connexion -->
    <div class="auth-link">
      <a routerLink="/connexion">Retour à la connexion</a> <!-- Adaptez le chemin '/connexion' -->
    </div>

  </section>
</div>
