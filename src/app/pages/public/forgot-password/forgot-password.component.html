<div class="container">
  <div class="login-container" role="main">
    <h1>Mot de passe oublié</h1>

    <!-- Formulaire pour la réinitialisation du mot de passe. -->
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" novalidate>

      <!-- Champ Email. -->
      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="Votre email"
          required
          autocomplete="email"
          aria-required="true"
          [attr.aria-invalid]="forgotPasswordForm.get('email')?.invalid && (forgotPasswordForm.get('email')?.dirty || forgotPasswordForm.get('email')?.touched)"
          [attr.aria-describedby]="forgotPasswordForm.get('email')?.invalid && (forgotPasswordForm.get('email')?.dirty || forgotPasswordForm.get('email')?.touched) ? 'email-error' : null"
        />
        <!-- Messages d'erreur de validation pour l'email. -->
        @if (forgotPasswordForm.get('email')?.invalid && (forgotPasswordForm.get('email')?.dirty || forgotPasswordForm.get('email')?.touched)) {
          <div id="email-error" class="validation-error" role="alert">
            @if (forgotPasswordForm.get('email')?.errors?.['required']) {
              <span>L'email est requis.</span>
            }
            @if (forgotPasswordForm.get('email')?.errors?.['email']) {
              <span>Format d'email invalide.</span>
            }
          </div>
        }
      </div>

      <!-- Bouton de soumission du formulaire. -->
      <button type="submit" class="login-btn" [disabled]="forgotPasswordForm.invalid || isLoading">
        @if (!isLoading) {
          <strong>Envoyer le lien de réinitialisation</strong>
        } @else {
          <strong>Envoie du lien...</strong>
        }
      </button>
    </form>

    <div class="home-link">
      <!-- Lien pour retourner à la page de connexion. -->
      <a routerLink="/accueil" class="home-btn">
        <lucide-icon name="arrow-left"></lucide-icon>
        <span>Retour à la connexion</span>
      </a>
    </div>

  </div>
</div>
