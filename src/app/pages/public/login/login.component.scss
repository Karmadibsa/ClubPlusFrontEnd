/*------------------------------------*\
  #PAGE: CONNEXION
  Styles pour la page et le formulaire de connexion.
\*------------------------------------*/

// --- Conteneur Principal & Login ---

// Conteneur global pour centrer la boîte de connexion dans la page.
.container {
  width: 100%;
  min-height: 100vh; // Prend au moins toute la hauteur de la fenêtre.
  display: flex;
  justify-content: center; // Centre horizontalement le contenu.
  align-items: center; // Centre verticalement le contenu.
  // La variable --background-color doit être définie globalement (:root ou dans un fichier importé).
  background-color: var(--background-color, #f4f7f6); // Fallback gris clair si variable non définie.
  padding: 1rem; // Ajoute un peu d'espace sur les bords.
  box-sizing: border-box;
}

// Conteneur spécifique du formulaire de connexion.
.login-container {
  // La variable --container-background doit être définie globalement.
  background: var(--container-background, white); // Fallback blanc si variable non définie.
  padding: 30px 40px; // Marges internes.
  border-radius: 8px; // Coins arrondis.
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); // Ombre portée.
  width: 100%; // Prend la largeur disponible.
  max-width: 450px; // Limite la largeur maximale.
  text-align: center; // Centre le titre H1 et les liens en bas.

  h1 {
    // Style du titre principal "Connexion".
    // La variable --text-color doit être définie globalement.
    color: var(--text-color, #333); // Fallback couleur texte foncée.
    margin-bottom: 25px; // Marge inférieure.
    font-size: 2rem; // Taille de police.
    font-weight: 600; // Épaisseur de la police.
  }
}

// --- Formulaire ---
form {
  display: flex; // Utilise Flexbox.
  flex-direction: column; // Dispose les éléments enfants verticalement.
  gap: 18px; // Espace entre les groupes de formulaire (.form-group).
  text-align: left; // Aligne les labels et inputs à gauche par défaut.
}

// Groupe contenant un label, un input et potentiellement un message d'erreur.
.form-group {
  display: flex;
  flex-direction: column; // Label au-dessus de l'input.
  width: 100%; // Prend toute la largeur du formulaire.

  label {
    margin-bottom: 6px; // Espace sous le label, avant l'input.
    color: var(--text-color, #333); // Couleur du label via variable ou fallback.
    font-size: 0.9rem; // Taille du texte du label.
    font-weight: 500; // Épaisseur du texte du label.
  }

  // Styles communs aux champs email et password dans ce formulaire.
  input[type="email"],
  input[type="password"],
  input[type="text"] { // Ajout de type="text" pour quand le mdp est visible
    padding: 12px 15px; // Marge intérieure du champ.
    // La variable --input-border-color doit être définie globalement.
    border: 1px solid var(--input-border-color, #ccc); // Bordure via variable ou fallback.
    border-radius: 4px; // Coins arrondis.
    font-size: 1rem; // Taille du texte saisi.
    width: 100%; // Prend toute la largeur disponible.
    box-sizing: border-box; // Le padding et la bordure sont inclus dans la largeur.
    transition: border-color 0.3s ease, box-shadow 0.3s ease; // Transition douce pour le focus.

    &:focus {
      // Style au focus pour accessibilité et clarté.
      // La variable --main-blue doit être définie globalement.
      border-color: var(--main-blue, #007bff); // Couleur de bordure au focus via variable ou fallback.
      outline: none; // Supprime l'outline par défaut du navigateur.
      // Utilise la couleur principale pour l'ombre de focus.
      box-shadow: 0 0 0 2px rgba(var(--main-blue, 0, 123, 255), 0.2); // Ombre légère au focus.
    }
  }

  // Style appliqué par Angular aux inputs invalides après interaction.
  input.ng-invalid.ng-touched {
    // La variable --danger-red doit être définie globalement.
    border-color: var(--danger-red, #dc3545); // Bordure rouge pour erreur via variable ou fallback.
  }
}

// --- Champ Mot de Passe avec Bouton Toggle ---
.password-input {
  position: relative; // Permet de positionner le bouton absolument à l'intérieur.
  display: flex; // Nécessaire pour que l'input prenne la largeur.
  align-items: center; // Centre verticalement l'input et le bouton (si hauteurs différentes).

  // L'input dans ce conteneur (type password ou text).
  input {
    // Ajoute un padding à droite pour ne pas que le texte aille sous l'icône.
    padding-right: 45px; // Espace réservé pour le bouton toggle.
  }

  // Bouton permettant d'afficher/masquer le mot de passe.
  .toggle-password {
    position: absolute; // Positionné par rapport à .password-input.
    right: 0px; // Collé au bord droit.
    top: 0; // Alignement vertical haut.
    bottom: 0; // Alignement vertical bas.
    background: none; // Pas de fond.
    border: none; // Pas de bordure.
    padding: 0 12px; // Zone cliquable horizontale.
    cursor: pointer; // Curseur main.
    display: flex; // Pour centrer l'icône à l'intérieur.
    align-items: center; // Centre l'icône verticalement.
    justify-content: center; // Centre l'icône horizontalement.
    color: #777; // Couleur de l'icône par défaut (gris).
    transition: color 0.2s ease; // Transition douce de la couleur.

    // Cibler l'icône (Lucide ou <i>) à l'intérieur du bouton.
    lucide-icon, i {
      width: 18px; // Taille de l'icône.
      height: 18px; // Taille de l'icône.
      display: block; // Assure un bon rendu.
    }

    &:hover {
      // Changement de couleur au survol.
      color: var(--main-blue, #007bff); // Couleur principale au survol via variable ou fallback.
    }

    &:focus {
      // Style de focus pour l'accessibilité (si différent du hover).
      outline: 1px dotted var(--main-blue, #007bff); // Outline fin pour le focus clavier.
      outline-offset: 2px;
      color: var(--main-blue, #007bff);
    }
  }
}

// --- Bouton de Connexion ---
.login-btn {
  margin-top: 15px; // Espace au-dessus du bouton.
  background-color: var(--main-blue, #007bff); // Couleur de fond via variable ou fallback.
  color: white; // Texte blanc.
  border: none; // Pas de bordure.
  border-radius: 4px; // Coins arrondis.
  padding: 12px 15px; // Padding interne.
  font-size: 1.1rem; // Taille du texte.
  font-weight: 600; // Épaisseur du texte.
  cursor: pointer; // Curseur main.
  transition: background-color 0.3s ease, opacity 0.3s ease; // Transitions.
  width: 100%; // Prend toute la largeur du conteneur.

  &:hover:not(:disabled) { // Effet au survol seulement si non désactivé.
    background-color: var(--main-orange, #fd7e14); // Couleur au survol via variable ou fallback.
  }

  &:disabled { // Style lorsque le bouton est désactivé.
    background-color: #ccc; // Fond gris.
    cursor: not-allowed; // Curseur interdit.
    opacity: 0.7; // Légèrement transparent.
  }

  strong {
    display: block; // Assure que le texte prend la place.
  }
}


// --- Lien Retour à l'accueil ---
.home-link {
  margin-top: 25px; // Espace au-dessus du lien.

  .home-btn {
    display: inline-flex; // Alignement icône et texte.
    align-items: center; // Centrage vertical.
    gap: 8px; // Espace entre icône et texte.
    color: #666; // Couleur discrète par défaut.
    text-decoration: none; // Pas de soulignement.
    font-size: 0.9rem; // Taille du texte.
    transition: color 0.2s ease; // Transition couleur.

    // Style pour l'icône (Lucide ou <i>)
    i[data-lucide="arrow-left"] {
      width: 16px;
      height: 16px;
      display: block; // Bon rendu.
      // S'assurer que l'icône Lucide hérite de la couleur.
      stroke: currentColor;
      stroke-width: 2px;
    }

    &:hover {
      color: var(--main-blue, #007bff); // Couleur au survol via variable ou fallback.
      text-decoration: underline; // Soulignement au survol.
    }
  }
}

// --- Messages d'Erreur ---
// Bandeau pour erreur générale (si réactivé dans le HTML)
.error-message {
  color: white;
  background-color: var(--danger-red, #dc3545); // Couleur de fond via variable ou fallback.
  padding: 10px;
  margin-bottom: 15px; // Espace en dessous.
  border-radius: 4px;
  font-size: 0.9rem;
  text-align: center;
}

// Message d'erreur sous un champ de formulaire spécifique.
.validation-error {
  color: var(--danger-red, #dc3545); // Couleur du texte via variable ou fallback.
  font-size: 0.8rem; // Taille du texte réduite.
  margin-top: 4px; // Espace au-dessus (entre input et erreur).
  min-height: 1em; // Réserve la hauteur pour éviter les sauts de layout quand l'erreur apparaît/disparaît.
  text-align: left; // Assure l'alignement à gauche sous le champ.
}

// --- Section Simulation (Styles spécifiques aux boutons dev) ---
.dev-simulation-section {
  // Styles optionnels pour la section de simulation.

  .dev-sim-btn {
    // Styles pour les boutons de simulation.
    // Vous pouvez utiliser des classes .btn globales ou définir des styles ici.
    padding: 8px 12px;
    font-size: 0.85rem;
    // Ajouter des couleurs distinctes si nécessaire.
    background-color: #6c757d; // Exemple de couleur grise.
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: #5a6268; // Assombrir au survol.
    }
  }
}

/*------------------------------------*\
  #MEDIA QUERIES: RESPONSIVE
\*------------------------------------*/
@media (max-width: 500px) {
  .login-container {
    padding: 25px 20px; // Réduit le padding sur très petits écrans.
  }

  h1 {
    font-size: 1.8rem; // Réduit la taille du titre.
  }

  .form-group input[type="email"],
  .form-group input[type="password"],
  .form-group input[type="text"] {
    padding: 10px 12px; // Réduit légèrement le padding des inputs.
    // Si le bouton toggle est présent, s'assurer que padding-right reste suffisant.
    &.password-input input { // Cible l'input dans le conteneur password
      padding-right: 40px; // Ajuster si besoin.
    }
  }

  .toggle-password {
    padding: 0 10px; // Ajuster padding bouton toggle.
  }

  .login-btn {
    font-size: 1rem; // Réduit taille texte bouton principal.
    padding: 10px 15px;
  }

  .home-link {
    margin-top: 20px; // Réduit espace au-dessus du lien retour.
  }

  .dev-simulation-section button {
    padding: 6px 10px; // Réduit taille boutons dev.
    font-size: 0.8rem;
  }
}
