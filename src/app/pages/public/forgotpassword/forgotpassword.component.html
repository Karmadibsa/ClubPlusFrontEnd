<!-- En-tête de la page -->
<div class="contenu">


<div class="page-header">
  <!-- Icône appropriée pour mot de passe oublié -->
  <i data-lucide="key-round" aria-hidden="true"></i>
  <h1 class="page-title">Mot de passe oublié ?</h1>
</div>

<!-- Section principale contenant le formulaire -->
<section class="main-section">
  <h2 id="main-title" class="visually-hidden">Formulaire de demande de réinitialisation de mot de passe</h2>

  <!-- Formulaire Réactif Angular -->
  <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" novalidate>
    <fieldset class="card-section">
      <legend class="section-header">
        <h2>Réinitialiser le mot de passe</h2>
        <p class="section-description">Entrez votre adresse e-mail et nous vous enverrons un lien pour réinitialiser votre mot de passe.</p>
      </legend>

      <div class="card-content">

        <!-- Affichage des messages succès/erreur -->
        <div *ngIf="successMessage" class="alert alert-success" role="alert">
          {{ successMessage }}
        </div>
        <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
          {{ errorMessage }}
        </div>

        <!-- Champ Adresse E-mail -->
        <div class="form-group">
          <label for="email">
            Adresse e-mail<span class="required-indicator">*</span>
          </label>
          <input type="email"
                 id="email"
                 formControlName="email"
                 class="form-control"
                 [class.is-invalid]="email?.invalid &&  email?.dirty"
                 required
                 placeholder="exemple@domaine.com"
                 aria-describedby="email-error">
          <!-- Messages d'erreur pour E-mail -->
          <div id="email-error" *ngIf="email?.invalid && email?.dirty">
            <small *ngIf="email?.errors?.['required']" class="invalid-feedback">
              L'adresse e-mail est requise.
            </small>
            <small *ngIf="email?.errors?.['email']" class="invalid-feedback">
              Veuillez entrer une adresse e-mail valide.
            </small>
          </div>
        </div>

      </div> <!-- Fin .card-content -->

      <!-- Actions du formulaire -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="isLoading || forgotPasswordForm.invalid">
          <span *ngIf="isLoading; else sendText" class="animate-spin" aria-hidden="true">
             <i data-lucide="loader-circle" ></i>
          </span>
          <ng-template #sendText>
            <i   data-lucide="send" aria-hidden="true"></i>
            Envoyer le lien de réinitialisation
          </ng-template>
        </button>
        <a routerLink="/changepassword">Aller sur la page</a> <!-- Adaptez le chemin '/login' -->

      </div>

    </fieldset>
  </form>

  <!-- Optionnel: Lien pour retourner à la page de connexion -->
  <div class="auth-link">
    <a routerLink="/connexion">Retour à la connexion</a> <!-- Adaptez le chemin '/login' -->
  </div>

</section>
</div>
